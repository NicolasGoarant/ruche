<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      background: #0F0E0A;
      color: white;
      padding: 20px;
      text-align: center;
      border-radius: 8px 8px 0 0;
    }
    .header h1 {
      margin: 0;
      font-size: 24px;
    }
    .content {
      background: white;
      border: 1px solid #e0e0e0;
      border-top: none;
      padding: 30px;
      border-radius: 0 0 8px 8px;
    }
    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
    }
    .badge-fle { background: #E4F3EC; color: #3A7A5A; }
    .badge-event { background: #E4EEF8; color: #1A5B9A; }
    .badge-enterprise { background: #FBE9E0; color: #C45A2A; }
    .badge-portrait { background: #F0E8F8; color: #6A3A9A; }
    h2 {
      color: #0F0E0A;
      margin-top: 0;
      font-size: 22px;
    }
    .info-block {
      background: #f8f8f8;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
    }
    .info-row {
      margin: 8px 0;
      font-size: 15px;
    }
    .label {
      font-weight: 600;
      color: #666;
    }
    .description {
      background: #FFF8E7;
      border-left: 4px solid #F5A800;
      padding: 15px;
      margin: 20px 0;
      font-size: 15px;
      line-height: 1.7;
    }
    .photos-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }
    .photo-item {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
    }
    .footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e0e0e0;
      color: #999;
      font-size: 13px;
    }
    .btn {
      display: inline-block;
      background: #F5A800;
      color: #0F0E0A;
      padding: 12px 24px;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 600;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üêù Nouvelle contribution sur la Ruche</h1>
  </div>
  
  <div class="content">
    <span class="badge badge-<%= @contribution.contribution_type %>">
      <%= @contribution.type_emoji %> <%= Contribution.type_label(@contribution.contribution_type) %>
    </span>
    
    <h2><%= @contribution.title %></h2>
    
    <div class="info-block">
      <div class="info-row">
        <span class="label">üìç Localisation :</span> <%= @contribution.location %>
      </div>
      <div class="info-row">
        <span class="label">üë§ Auteur :</span> <%= @contribution.author_flag %> <%= @contribution.author_name %>
      </div>
      <% if @contribution.contact_info.present? %>
        <div class="info-row">
          <span class="label">üìû Contact :</span> <%= @contribution.contact_info %>
        </div>
      <% end %>
      <div class="info-row">
        <span class="label">üìÖ Date :</span> <%= @contribution.created_at.strftime("%d/%m/%Y √† %H:%M") %>
      </div>
    </div>
    
    <div class="description">
      <strong>Description :</strong><br>
      <%= simple_format(@contribution.description) %>
    </div>
    
    <% if @contribution.photos.attached? %>
      <div style="margin: 20px 0;">
        <strong style="color: #0F0E0A;">üì∏ Photos (<%= @contribution.photos.count %>) :</strong>
      </div>
      <div class="photos-grid">
        <% @contribution.photos.each do |photo| %>
          <%= image_tag rails_blob_url(photo), class: 'photo-item', alt: 'Photo contribution' %>
        <% end %>
      </div>
    <% elsif @contribution.image_url.present? %>
      <div style="text-align: center; margin: 20px 0;">
        <img src="<%= @contribution.image_url %>" alt="<%= @contribution.title %>" style="max-width: 100%; height: auto; border-radius: 8px;">
      </div>
    <% end %>
    
    <div style="text-align: center;">
      <a href="http://localhost:3000/contributions/<%= @contribution.id %>" class="btn">
        Voir la contribution ‚Üí
      </a>
    </div>
  </div>
  
  <div class="footer">
    Cette contribution a √©t√© publi√©e sur la Ruche.<br>
    ID: #<%= @contribution.id %> ¬∑ Statut: <%= @contribution.published ? 'Publi√©' : 'En attente' %>
  </div>
</body>
</html>
